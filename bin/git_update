#!/bin/bash

PROJECT_PATH=''
BRANCH=''
if [ "$1" == "" ] || [ "$2" == "" ] ; then
  echo "<git project> <branch> [patch]"
  exit
else
  PROJECT_PATH=$1
  BRANCH=$2
fi

cd $PROJECT_PATH
git checkout -- .
git clean -df
git checkout $BRANCH
git checkout -- .
git clean -df
git pull
if [ "$3" != "" ] ; then
  patch -p0 < $3
fi
